[
  {
    "name": "aifp_run",
    "level": 0,
    "triggers": ["project_init", "project_task_decomposition", "project_file_write"],
    "depends_on": [],
    "escalates_to": [],
    "cross_links": [],
    "fp_links": [],
    "notes": "Root entry point for all project and FP workflows."
  },
  {
    "name": "project_init",
    "level": 1,
    "triggers": ["project_task_decomposition", "project_add_path"],
    "depends_on": ["aifp_run"],
    "escalates_to": [],
    "cross_links": [],
    "fp_links": [],
    "notes": "Initializes new project environment and scaffolding."
  },
  {
    "name": "project_task_decomposition",
    "level": 2,
    "triggers": ["project_add_path", "project_error_handling"],
    "depends_on": ["project_init"],
    "escalates_to": ["project_compliance_check"],
    "cross_links": ["project_add_path"],
    "fp_links": [],
    "notes": "Decomposes user goals into tasks, subtasks, and sidequests."
  },
  {
    "name": "project_add_path",
    "level": 2,
    "triggers": ["project_file_write", "project_completion_check"],
    "depends_on": ["project_task_decomposition"],
    "escalates_to": [],
    "cross_links": ["project_task_decomposition"],
    "fp_links": [],
    "notes": "Manages roadmap and milestone insertion within project.db."
  },
  {
    "name": "project_file_write",
    "level": 3,
    "triggers": ["project_update_db", "project_theme_flow_mapping"],
    "depends_on": ["project_add_path"],
    "escalates_to": [],
    "cross_links": [],
    "fp_links": ["fp_purity", "fp_side_effect_detection"],
    "notes": "Handles file generation and validation before DB update."
  },
  {
    "name": "project_update_db",
    "level": 3,
    "triggers": ["project_dependency_sync"],
    "depends_on": ["project_file_write"],
    "escalates_to": ["project_compliance_check"],
    "cross_links": [],
    "fp_links": ["fp_dependency_tracking"],
    "notes": "Synchronizes project.db with file metadata and function details."
  },
  {
    "name": "project_theme_flow_mapping",
    "level": 3,
    "triggers": ["project_metrics"],
    "depends_on": ["project_file_write"],
    "escalates_to": [],
    "cross_links": ["project_metrics"],
    "fp_links": ["fp_composition_chaining"],
    "notes": "Classifies files/functions by thematic and procedural flow."
  },
  {
    "name": "project_dependency_sync",
    "level": 3,
    "triggers": ["project_integrity_check", "project_metrics"],
    "depends_on": ["project_update_db"],
    "escalates_to": [],
    "cross_links": ["project_update_db"],
    "fp_links": [],
    "notes": "Keeps dependency links consistent between code and database."
  },
  {
    "name": "project_compliance_check",
    "level": 4,
    "triggers": ["project_completion_check", "project_metrics"],
    "depends_on": ["project_update_db"],
    "escalates_to": ["project_error_handling"],
    "cross_links": [],
    "fp_links": ["fp_purity", "fp_no_oop", "fp_side_effect_detection"],
    "notes": "Validates FP compliance and project rule adherence."
  },
  {
    "name": "project_completion_check",
    "level": 4,
    "triggers": ["project_metrics", "project_auto_summary"],
    "depends_on": ["project_compliance_check"],
    "escalates_to": [],
    "cross_links": [],
    "fp_links": [],
    "notes": "Monitors completion_path and marks milestone progress."
  },
  {
    "name": "project_error_handling",
    "level": 4,
    "triggers": ["project_user_referral"],
    "depends_on": ["project_compliance_check", "project_integrity_check"],
    "escalates_to": [],
    "cross_links": [],
    "fp_links": [],
    "notes": "Applies known resolutions or escalates unknown issues to user."
  },
  {
    "name": "project_user_referral",
    "level": 4,
    "triggers": [],
    "depends_on": ["project_error_handling"],
    "escalates_to": [],
    "cross_links": [],
    "fp_links": [],
    "notes": "Prompts user for clarification during ambiguous states."
  },
  {
    "name": "project_evolution",
    "level": 4,
    "triggers": ["project_add_path", "project_metrics"],
    "depends_on": ["project_completion_check"],
    "escalates_to": [],
    "cross_links": [],
    "fp_links": [],
    "notes": "Tracks project pivots and updates roadmap/goals."
  },
  {
    "name": "project_integrity_check",
    "level": 4,
    "triggers": ["project_backup_restore", "project_error_handling"],
    "depends_on": ["project_dependency_sync"],
    "escalates_to": [],
    "cross_links": [],
    "fp_links": [],
    "notes": "Validates internal project.db consistency."
  },
  {
    "name": "project_backup_restore",
    "level": 4,
    "triggers": [],
    "depends_on": ["project_integrity_check"],
    "escalates_to": [],
    "cross_links": [],
    "fp_links": [],
    "notes": "Manages automatic and manual project backup and restore cycles."
  },
  {
    "name": "project_auto_resume",
    "level": 3,
    "triggers": ["project_task_decomposition", "project_file_write"],
    "depends_on": [],
    "escalates_to": [],
    "cross_links": [],
    "fp_links": [],
    "notes": "Resumes interrupted tasks and workflows."
  },
  {
    "name": "project_refactor_path",
    "level": 3,
    "triggers": [],
    "depends_on": ["project_evolution"],
    "escalates_to": ["project_add_path"],
    "cross_links": [],
    "fp_links": [],
    "notes": "Allows roadmap restructuring without data loss."
  },
  {
    "name": "project_archive",
    "level": 4,
    "triggers": [],
    "depends_on": ["project_completion_check", "project_metrics"],
    "escalates_to": [],
    "cross_links": [],
    "fp_links": [],
    "notes": "Packages completed projects into archival format."
  },
  {
    "name": "project_metrics",
    "level": 4,
    "triggers": ["project_performance_summary", "project_auto_summary"],
    "depends_on": ["project_completion_check", "project_theme_flow_mapping"],
    "escalates_to": [],
    "cross_links": ["project_performance_summary"],
    "fp_links": [],
    "notes": "Aggregates project and directive performance metrics."
  },
  {
    "name": "project_performance_summary",
    "level": 4,
    "triggers": ["project_auto_summary"],
    "depends_on": ["project_metrics"],
    "escalates_to": [],
    "cross_links": [],
    "fp_links": [],
    "notes": "Summarizes directive success/failure outcomes."
  },
  {
    "name": "project_auto_summary",
    "level": 4,
    "triggers": [],
    "depends_on": ["project_metrics", "project_completion_check"],
    "escalates_to": [],
    "cross_links": [],
    "fp_links": [],
    "notes": "Produces concise summaries of project status and completion."
  },
  {
    "name": "project_dependency_map",
    "level": 3,
    "triggers": [],
    "depends_on": ["project_dependency_sync"],
    "escalates_to": [],
    "cross_links": ["project_integrity_check"],
    "fp_links": [],
    "notes": "Generates dependency graphs linking files, flows, and tasks."
  }
]
