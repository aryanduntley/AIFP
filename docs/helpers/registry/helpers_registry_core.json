{
  "metadata": {
    "version": "1.0.0",
    "last_updated": "2025-11-26",
    "description": "Core MCP Database helpers - Directive and helper management (READ-ONLY)",
    "database": "aifp_core.db",
    "total_helpers": 33,
    "schema_version": "1.0",
    "notes": "This registry is for import into MCP database. All core helpers are read-only. Helpers reference directives (not vice versa)."
  },
  "helper_schema": {
    "description": "Schema definition for helper entries",
    "fields": {
      "name": "Function name",
      "file_path": "Path to implementation file",
      "database": "Which database this helper operates on",
      "purpose": "Detailed description of what this helper does",
      "parameters": "Array of parameter objects with name and type",
      "return_statements": "Array of AI behavioral guidance - what to check/do next after calling this helper",
      "error_handling": "How errors are handled",
      "used_by_directives": "Array of directive names that use this helper",
      "is_tool": "Boolean - exposed via MCP as tool",
      "is_sub_helper": "Boolean - internal utility helper not directly called by AI/directives",
      "calls_helpers": "Array of helper names this function calls",
      "category": "Functional category"
    }
  },
  "database": "aifp_core.db",
  "file_location": "src/aifp/helpers/mcp/",
  "helpers": [
    {
      "name": "get_directive",
      "file_path": "src/aifp/helpers/mcp/tools/directive_tools.py",
      "database": "aifp_core.db",
      "purpose": "Retrieve specific directive by ID from directives table.",
      "parameters": [
        {
          "name": "directive_id",
          "type": "int",
          "required": true,
          "description": "Directive ID"
        }
      ],
      "return_statements": [
        "If None returned, directive ID does not exist - verify ID is correct",
        "Review returned directive's self_assessment_questions before execution",
        "Check priority level and execution level to understand directive importance",
        "Use get_directive_md to load full documentation if needed"
      ],
      "error_handling": "Return None if directive not found.",
      "used_by_directives": ["aifp_run"],
      "is_tool": true,
      "is_sub_helper": false,
      "calls_helpers": [],
      "category": "directive_queries"
    },
    {
      "name": "get_directive_by_name",
      "file_path": "src/aifp/helpers/mcp/tools/directive_tools.py",
      "database": "aifp_core.db",
      "purpose": "Retrieve specific directive by name from directives table.",
      "parameters": [
        {
          "name": "directive_name",
          "type": "str",
          "required": true,
          "description": "Directive name (e.g., 'project_task_create')"
        }
      ],
      "return_statements": [
        "If None returned, directive name does not exist - verify name spelling or use search_directives",
        "Review returned directive's self_assessment_questions before execution",
        "Check priority level and execution level to understand directive importance",
        "Use get_directive_md to load full documentation if needed"
      ],
      "error_handling": "Return None if directive not found.",
      "used_by_directives": ["aifp_run"],
      "is_tool": true,
      "is_sub_helper": false,
      "calls_helpers": [],
      "category": "directive_queries"
    },
    {
      "name": "get_directives",
      "file_path": "src/aifp/helpers/mcp/tools/directive_tools.py",
      "database": "aifp_core.db",
      "purpose": "Retrieve multiple directives by array of IDs.",
      "parameters": [
        {
          "name": "directive_ids",
          "type": "list[int]",
          "required": true,
          "description": "Array of directive IDs"
        }
      ],
      "return_statements": [
        "Returns list of directive objects - empty list if no matches",
        "Use this when you have multiple directive IDs from other helpers (like get_directives_by_category)",
        "Returned list may be shorter than input array if some IDs don't exist"
      ],
      "error_handling": "Return empty list if no directives found.",
      "used_by_directives": [],
      "is_tool": true,
      "is_sub_helper": false,
      "calls_helpers": [],
      "category": "directive_queries"
    },
    {
      "name": "get_directives_by_name",
      "file_path": "src/aifp/helpers/mcp/tools/directive_tools.py",
      "database": "aifp_core.db",
      "purpose": "Retrieve multiple directives by array of names.",
      "parameters": [
        {
          "name": "directive_names",
          "type": "list[str]",
          "required": true,
          "description": "Array of directive names"
        }
      ],
      "return_statements": [
        "Returns list of directive objects - empty list if no matches",
        "Use this for bulk retrieval when you have directive names from relationships or interactions",
        "Returned list may be shorter than input array if some names don't exist"
      ],
      "error_handling": "Return empty list if no directives found.",
      "used_by_directives": [],
      "is_tool": true,
      "is_sub_helper": false,
      "calls_helpers": [],
      "category": "directive_queries"
    },
    {
      "name": "get_directive_md",
      "file_path": "src/aifp/helpers/mcp/tools/directive_tools.py",
      "database": "aifp_core.db",
      "purpose": "Load full markdown documentation for a directive on-demand from MD file.",
      "parameters": [
        {
          "name": "directive_name",
          "type": "str",
          "required": true,
          "description": "Name of directive"
        }
      ],
      "return_statements": [
        "If exists=false, directive has no markdown documentation - use directive description instead",
        "Load MD content when you need detailed workflow steps, examples, or edge case handling",
        "MD files contain self-assessment questions - review these before proceeding",
        "MD files show related directives - consider if those should be executed instead"
      ],
      "error_handling": "Return dict with exists: false if MD file not found.",
      "used_by_directives": ["aifp_help"],
      "is_tool": false,
      "is_sub_helper": false,
      "calls_helpers": [],
      "category": "directive_queries"
    },
    {
      "name": "get_directive_confidence",
      "file_path": "src/aifp/helpers/mcp/tools/directive_tools.py",
      "database": "aifp_core.db",
      "purpose": "Get confidence threshold for directive matching/escalation.",
      "parameters": [
        {
          "name": "directive_name",
          "type": "str",
          "required": true,
          "description": "Name of directive"
        }
      ],
      "return_statements": [
        "Use returned confidence_threshold when matching user requests to this directive",
        "If confidence < threshold, directive may not be appropriate - consider alternatives or ask user",
        "Lower threshold = more lenient matching, higher threshold = stricter matching"
      ],
      "error_handling": "Return None if directive not found.",
      "used_by_directives": [],
      "is_tool": false,
      "is_sub_helper": false,
      "calls_helpers": [],
      "category": "directive_queries"
    },
    {
      "name": "get_directive_workflow",
      "file_path": "src/aifp/helpers/mcp/tools/directive_tools.py",
      "database": "aifp_core.db",
      "purpose": "Get workflow JSON with trunk/branches/error_handling for directive execution.",
      "parameters": [
        {
          "name": "directive_name",
          "type": "str",
          "required": true,
          "description": "Name of directive"
        }
      ],
      "return_statements": [
        "Workflow JSON defines execution steps - follow trunk for main path, branches for conditionals",
        "Check error_handling section for how to handle failures at each step",
        "Use this when directive execution needs structured step-by-step guidance",
        "If workflow is complex, break down into sequential steps and execute one at a time"
      ],
      "error_handling": "Return None if directive not found or has no workflow.",
      "used_by_directives": [],
      "is_tool": false,
      "is_sub_helper": false,
      "calls_helpers": [],
      "category": "directive_queries"
    },
    {
      "name": "get_directive_id",
      "file_path": "src/aifp/helpers/mcp/tools/directive_tools.py",
      "database": "aifp_core.db",
      "purpose": "Get directive ID from directive name. Helper for ID lookups.",
      "parameters": [
        {
          "name": "directive_name",
          "type": "str",
          "required": true,
          "description": "Name of directive"
        }
      ],
      "return_statements": [
        "Use returned ID for subsequent queries that require directive_id parameter",
        "This is a sub-helper for quick ID lookup without retrieving full directive object"
      ],
      "error_handling": "Return None if directive not found.",
      "used_by_directives": [],
      "is_tool": false,
      "is_sub_helper": false,
      "calls_helpers": [],
      "category": "directive_queries"
    },
    {
      "name": "get_directive_name",
      "file_path": "src/aifp/helpers/mcp/tools/directive_tools.py",
      "database": "aifp_core.db",
      "purpose": "Get directive name from directive ID. Helper for name lookups.",
      "parameters": [
        {
          "name": "directive_id",
          "type": "int",
          "required": true,
          "description": "Directive ID"
        }
      ],
      "return_statements": [
        "Use returned name for displaying to user or passing to name-based queries",
        "This is a sub-helper for quick name lookup without retrieving full directive object"
      ],
      "error_handling": "Return None if directive ID not found.",
      "used_by_directives": [],
      "is_tool": false,
      "is_sub_helper": false,
      "calls_helpers": [],
      "category": "directive_queries"
    },
    {
      "name": "get_categories",
      "file_path": "src/aifp/helpers/mcp/tools/category_tools.py",
      "database": "aifp_core.db",
      "purpose": "Retrieve all categories from categories table.",
      "parameters": [],
      "return_statements": [
        "Returns list of all category objects with id, name, description",
        "Use category IDs for filtering directives by category",
        "Categories help organize directives functionally (e.g., task_management, git_integration)"
      ],
      "error_handling": "Return empty list if no categories found.",
      "used_by_directives": [],
      "is_tool": true,
      "is_sub_helper": false,
      "calls_helpers": [],
      "category": "category_queries"
    },
    {
      "name": "get_category_id",
      "file_path": "src/aifp/helpers/mcp/tools/category_tools.py",
      "database": "aifp_core.db",
      "purpose": "Get category ID from category name.",
      "parameters": [
        {
          "name": "category_name",
          "type": "str",
          "required": true,
          "description": "Category name"
        }
      ],
      "return_statements": [
        "Use returned ID for get_directives_by_category queries",
        "This is a sub-helper for quick ID lookup"
      ],
      "error_handling": "Return None if category not found.",
      "used_by_directives": [],
      "is_tool": false,
      "is_sub_helper": false,
      "calls_helpers": [],
      "category": "category_queries"
    },
    {
      "name": "get_category_name",
      "file_path": "src/aifp/helpers/mcp/tools/category_tools.py",
      "database": "aifp_core.db",
      "purpose": "Get category name from category ID.",
      "parameters": [
        {
          "name": "category_id",
          "type": "int",
          "required": true,
          "description": "Category ID"
        }
      ],
      "return_statements": [
        "Use returned name for displaying category to user",
        "This is a sub-helper for quick name lookup"
      ],
      "error_handling": "Return None if category ID not found.",
      "used_by_directives": [],
      "is_tool": false,
      "is_sub_helper": false,
      "calls_helpers": [],
      "category": "category_queries"
    },
    {
      "name": "get_category_description",
      "file_path": "src/aifp/helpers/mcp/tools/category_tools.py",
      "database": "aifp_core.db",
      "purpose": "Get description of all categories for understanding category purposes.",
      "parameters": [],
      "return_statements": [
        "Returns dict mapping category names to descriptions",
        "Use this to understand what types of directives belong in each category"
      ],
      "error_handling": "Return empty dict if no categories found.",
      "used_by_directives": [],
      "is_tool": false,
      "is_sub_helper": false,
      "calls_helpers": [],
      "category": "category_queries"
    },
    {
      "name": "get_directives_by_category",
      "file_path": "src/aifp/helpers/mcp/tools/category_tools.py",
      "database": "aifp_core.db",
      "purpose": "Get all directives that belong to a specific category via directive_categories table.",
      "parameters": [
        {
          "name": "category_id",
          "type": "int",
          "required": true,
          "description": "Category ID"
        }
      ],
      "return_statements": [
        "Returns list of directive_id values for this category",
        "Use get_directives(directive_id array) to retrieve full directive objects",
        "If empty list, category has no directives assigned"
      ],
      "error_handling": "Return empty list if no directives in category.",
      "used_by_directives": [],
      "is_tool": true,
      "is_sub_helper": false,
      "calls_helpers": ["get_directives"],
      "category": "category_queries"
    },
    {
      "name": "get_categories_by_directive",
      "file_path": "src/aifp/helpers/mcp/tools/category_tools.py",
      "database": "aifp_core.db",
      "purpose": "Get all categories that a directive belongs to via directive_categories table.",
      "parameters": [
        {
          "name": "directive_id",
          "type": "int",
          "required": true,
          "description": "Directive ID"
        }
      ],
      "return_statements": [
        "Returns list of category_id values for this directive",
        "Directives can belong to multiple categories",
        "Use get_categories() to get category names/descriptions if needed"
      ],
      "error_handling": "Return empty list if directive has no categories.",
      "used_by_directives": [],
      "is_tool": true,
      "is_sub_helper": false,
      "calls_helpers": [],
      "category": "category_queries"
    },
    {
      "name": "get_interactions_for_directive",
      "file_path": "src/aifp/helpers/mcp/tools/interaction_tools.py",
      "database": "aifp_core.db",
      "purpose": "Get all directive interactions where this directive is the source (active=1 only).",
      "parameters": [
        {
          "name": "source_directive_id",
          "type": "int",
          "required": true,
          "description": "Source directive ID"
        }
      ],
      "return_statements": [
        "Returns list of interactions with relation_type (triggers, depends_on, escalates_to, cross_link, fp_reference)",
        "Check relation_type to understand interaction: depends_on = prerequisites, triggers = next steps, escalates_to = fallback path",
        "Use get_directives(directive_id array) to get full details of target directives",
        "Only returns active=1 interactions - use get_inactive_interactions_for_directive for inactive ones"
      ],
      "error_handling": "Return empty list if no interactions found.",
      "used_by_directives": [],
      "is_tool": true,
      "is_sub_helper": false,
      "calls_helpers": ["get_directives"],
      "category": "interaction_queries"
    },
    {
      "name": "get_interactions_for_directive_as_target",
      "file_path": "src/aifp/helpers/mcp/tools/interaction_tools.py",
      "database": "aifp_core.db",
      "purpose": "Get all directive interactions where this directive is the target (active=1 only).",
      "parameters": [
        {
          "name": "target_directive_id",
          "type": "int",
          "required": true,
          "description": "Target directive ID"
        }
      ],
      "return_statements": [
        "Returns list of interactions where this directive is being referenced",
        "Useful for understanding what directives depend on or trigger this one",
        "Check relation_type to understand why this directive is being targeted"
      ],
      "error_handling": "Return empty list if no interactions found.",
      "used_by_directives": [],
      "is_tool": true,
      "is_sub_helper": false,
      "calls_helpers": [],
      "category": "interaction_queries"
    },
    {
      "name": "get_interactions_by_weight",
      "file_path": "src/aifp/helpers/mcp/tools/interaction_tools.py",
      "database": "aifp_core.db",
      "purpose": "Get interactions filtered by weight threshold (less/greater than or equal to).",
      "parameters": [
        {
          "name": "source_directive_id",
          "type": "int",
          "required": true,
          "description": "Source directive ID"
        },
        {
          "name": "less_or_greater",
          "type": "str",
          "required": true,
          "description": "Filter mode: 'less' or 'greater'"
        },
        {
          "name": "weight",
          "type": "float",
          "required": true,
          "description": "Weight threshold"
        }
      ],
      "return_statements": [
        "Weight indicates importance/priority of interaction (higher = more important)",
        "Use 'less' to get low-priority interactions, 'greater' to get high-priority ones",
        "Prioritize high-weight interactions when determining execution order"
      ],
      "error_handling": "Return empty list if no interactions match criteria.",
      "used_by_directives": [],
      "is_tool": false,
      "is_sub_helper": false,
      "calls_helpers": [],
      "category": "interaction_queries"
    },
    {
      "name": "get_interactions_for_directive_with_relationship",
      "file_path": "src/aifp/helpers/mcp/tools/interaction_tools.py",
      "database": "aifp_core.db",
      "purpose": "Get interactions for directive filtered by specific relation_type.",
      "parameters": [
        {
          "name": "source_directive_id",
          "type": "int",
          "required": true,
          "description": "Source directive ID"
        },
        {
          "name": "relation_type",
          "type": "str",
          "required": true,
          "description": "Relation type: triggers, depends_on, escalates_to, cross_link, fp_reference"
        }
      ],
      "return_statements": [
        "Use this to get specific type of interactions (e.g., only dependencies or only triggers)",
        "More focused than get_interactions_for_directive which returns all types",
        "Common use: get all depends_on to check prerequisites before execution"
      ],
      "error_handling": "Return empty list if no interactions with that relation_type.",
      "used_by_directives": [],
      "is_tool": false,
      "is_sub_helper": false,
      "calls_helpers": [],
      "category": "interaction_queries"
    },
    {
      "name": "get_inactive_interactions_for_directive",
      "file_path": "src/aifp/helpers/mcp/tools/interaction_tools.py",
      "database": "aifp_core.db",
      "purpose": "Get all inactive (active=0) interactions for directive. Useful for debugging.",
      "parameters": [
        {
          "name": "source_directive_id",
          "type": "int",
          "required": true,
          "description": "Source directive ID"
        }
      ],
      "return_statements": [
        "Inactive interactions are disabled and should NOT be followed",
        "Use this for debugging or understanding past/deprecated directive relationships",
        "Do not use inactive interactions for directive execution logic"
      ],
      "error_handling": "Return empty list if no inactive interactions.",
      "used_by_directives": [],
      "is_tool": false,
      "is_sub_helper": false,
      "calls_helpers": [],
      "category": "interaction_queries"
    },
    {
      "name": "get_helper_by_id",
      "file_path": "src/aifp/helpers/mcp/tools/helper_tools.py",
      "database": "aifp_core.db",
      "purpose": "Get helper function by ID from helper_functions table.",
      "parameters": [
        {
          "name": "helper_id",
          "type": "int",
          "required": true,
          "description": "Helper function ID"
        }
      ],
      "return_statements": [
        "Returns helper object with name, purpose, parameters, is_tool, is_sub_helper flags",
        "Check is_tool flag to determine if this is MCP-exposed",
        "Check is_sub_helper flag to determine if this should be called directly by AI or only by other helpers"
      ],
      "error_handling": "Return None if helper ID not found.",
      "used_by_directives": [],
      "is_tool": true,
      "is_sub_helper": false,
      "calls_helpers": [],
      "category": "helper_queries"
    },
    {
      "name": "get_helper_by_name",
      "file_path": "src/aifp/helpers/mcp/tools/helper_tools.py",
      "database": "aifp_core.db",
      "purpose": "Get helper function by name from helper_functions table.",
      "parameters": [
        {
          "name": "helper_name",
          "type": "str",
          "required": true,
          "description": "Helper function name"
        }
      ],
      "return_statements": [
        "Returns helper object with all metadata",
        "Check return_statements field for AI guidance on using this helper",
        "Check target_database to understand which database this helper operates on"
      ],
      "error_handling": "Return None if helper name not found.",
      "used_by_directives": [],
      "is_tool": true,
      "is_sub_helper": false,
      "calls_helpers": [],
      "category": "helper_queries"
    },
    {
      "name": "get_helpers_by_id",
      "file_path": "src/aifp/helpers/mcp/tools/helper_tools.py",
      "database": "aifp_core.db",
      "purpose": "Get multiple helper functions by array of IDs.",
      "parameters": [
        {
          "name": "helper_ids",
          "type": "list[int]",
          "required": true,
          "description": "Array of helper function IDs"
        }
      ],
      "return_statements": [
        "Returns list of helper objects",
        "Use this when you have multiple helper IDs from get_helpers_for_directive"
      ],
      "error_handling": "Return empty list if no helpers found.",
      "used_by_directives": [],
      "is_tool": true,
      "is_sub_helper": false,
      "calls_helpers": [],
      "category": "helper_queries"
    },
    {
      "name": "get_helpers_by_name",
      "file_path": "src/aifp/helpers/mcp/tools/helper_tools.py",
      "database": "aifp_core.db",
      "purpose": "Get multiple helper functions by array of names.",
      "parameters": [
        {
          "name": "helper_names",
          "type": "list[str]",
          "required": true,
          "description": "Array of helper function names"
        }
      ],
      "return_statements": [
        "Returns list of helper objects",
        "Useful for bulk retrieval when you have helper names"
      ],
      "error_handling": "Return empty list if no helpers found.",
      "used_by_directives": [],
      "is_tool": true,
      "is_sub_helper": false,
      "calls_helpers": [],
      "category": "helper_queries"
    },
    {
      "name": "get_helpers_by_database",
      "file_path": "src/aifp/helpers/mcp/tools/helper_tools.py",
      "database": "aifp_core.db",
      "purpose": "Get all helpers that operate on a specific database (target_database field).",
      "parameters": [
        {
          "name": "target_database",
          "type": "str",
          "required": true,
          "description": "Database name (aifp_core.db, project.db, user_preferences.db, user_directives.db)"
        }
      ],
      "return_statements": [
        "Returns list of all helpers for that database",
        "Useful for understanding what operations are available for each database",
        "Use target_database='project.db' to see all project management helpers"
      ],
      "error_handling": "Return empty list if no helpers for that database.",
      "used_by_directives": [],
      "is_tool": true,
      "is_sub_helper": false,
      "calls_helpers": [],
      "category": "helper_queries"
    },
    {
      "name": "get_helpers_are_tool",
      "file_path": "src/aifp/helpers/mcp/tools/helper_tools.py",
      "database": "aifp_core.db",
      "purpose": "Get all helpers where is_tool=true (MCP-exposed tools).",
      "parameters": [],
      "return_statements": [
        "Returns list of all MCP-exposed tools",
        "These are the primary entry points AI should use",
        "is_tool=true means this helper is exposed via MCP for direct AI access"
      ],
      "error_handling": "Return empty list if no tools found.",
      "used_by_directives": [],
      "is_tool": true,
      "is_sub_helper": false,
      "calls_helpers": [],
      "category": "helper_queries"
    },
    {
      "name": "get_helpers_not_tool_not_sub",
      "file_path": "src/aifp/helpers/mcp/tools/helper_tools.py",
      "database": "aifp_core.db",
      "purpose": "Get all helpers where is_tool=false AND is_sub_helper=false (regular helpers).",
      "parameters": [],
      "return_statements": [
        "Returns list of regular helpers",
        "These are utility helpers AI can call but aren't primary MCP tools",
        "These are not sub-helpers so they're meant for direct AI use when needed"
      ],
      "error_handling": "Return empty list if no regular helpers found.",
      "used_by_directives": [],
      "is_tool": true,
      "is_sub_helper": false,
      "calls_helpers": [],
      "category": "helper_queries"
    },
    {
      "name": "get_helpers_are_sub",
      "file_path": "src/aifp/helpers/mcp/tools/helper_tools.py",
      "database": "aifp_core.db",
      "purpose": "Get all helpers where is_sub_helper=true (internal utilities).",
      "parameters": [],
      "return_statements": [
        "Returns list of sub-helpers",
        "Sub-helpers are internal utilities typically called by other helpers, not directly by AI",
        "Use these only when specifically needed - main helpers should handle most operations"
      ],
      "error_handling": "Return empty list if no sub-helpers found.",
      "used_by_directives": [],
      "is_tool": true,
      "is_sub_helper": false,
      "calls_helpers": [],
      "category": "helper_queries"
    },
    {
      "name": "get_helper_statements",
      "file_path": "src/aifp/helpers/mcp/tools/helper_tools.py",
      "database": "aifp_core.db",
      "purpose": "Get return_statements JSON for a helper by name.",
      "parameters": [
        {
          "name": "helper_name",
          "type": "str",
          "required": true,
          "description": "Helper function name"
        }
      ],
      "return_statements": [
        "Returns return_statements JSON with AI guidance for this helper",
        "Review these statements after calling a helper to understand next steps",
        "Return statements provide suggestions, reminders, and directive chaining guidance"
      ],
      "error_handling": "Return None if helper not found or has no return_statements.",
      "used_by_directives": [],
      "is_tool": true,
      "is_sub_helper": false,
      "calls_helpers": [],
      "category": "helper_queries"
    },
    {
      "name": "get_helper_statements_by_id",
      "file_path": "src/aifp/helpers/mcp/tools/helper_tools.py",
      "database": "aifp_core.db",
      "purpose": "Get return_statements JSON for a helper by ID.",
      "parameters": [
        {
          "name": "helper_id",
          "type": "int",
          "required": true,
          "description": "Helper function ID"
        }
      ],
      "return_statements": [
        "Returns return_statements JSON with AI guidance",
        "Sub-helper variant of get_helper_statements for ID-based lookup"
      ],
      "error_handling": "Return None if helper ID not found or has no return_statements.",
      "used_by_directives": [],
      "is_tool": false,
      "is_sub_helper": false,
      "calls_helpers": [],
      "category": "helper_queries"
    },
    {
      "name": "get_helpers_for_directive",
      "file_path": "src/aifp/helpers/mcp/tools/directive_helper_tools.py",
      "database": "aifp_core.db",
      "purpose": "Get all helpers associated with a directive via directive_helpers table.",
      "parameters": [
        {
          "name": "directive_id",
          "type": "int",
          "required": true,
          "description": "Directive ID"
        },
        {
          "name": "include_helpers_data",
          "type": "bool",
          "required": false,
          "default": false,
          "description": "If true, includes full helper_functions data"
        }
      ],
      "return_statements": [
        "If include_helpers_data=false, returns directive_helpers rows with execution_context, sequence_order, is_required",
        "If include_helpers_data=true, calls get_helpers_by_id and returns both directive_helpers AND full helper data",
        "Review sequence_order to understand execution order of helpers",
        "Check is_required flag to determine if helper must be called",
        "Review execution_context to understand when helper should be called (e.g., 'workflow_step_3', 'error_handler')"
      ],
      "error_handling": "Return empty list if directive has no helpers.",
      "used_by_directives": [],
      "is_tool": true,
      "is_sub_helper": false,
      "calls_helpers": ["get_helpers_by_id"],
      "category": "directive_helper_queries"
    },
    {
      "name": "get_directives_for_helper",
      "file_path": "src/aifp/helpers/mcp/tools/directive_helper_tools.py",
      "database": "aifp_core.db",
      "purpose": "Get all directives that use a specific helper via directive_helpers table.",
      "parameters": [
        {
          "name": "helper_function_id",
          "type": "int",
          "required": true,
          "description": "Helper function ID"
        },
        {
          "name": "include_directives_data",
          "type": "bool",
          "required": false,
          "default": false,
          "description": "If true, includes full directives data"
        }
      ],
      "return_statements": [
        "If include_directives_data=false, returns directive_helpers rows",
        "If include_directives_data=true, calls get_directives and returns both directive_helpers AND full directive data",
        "Useful for understanding which directives depend on this helper",
        "If helper is modified, check all returned directives to ensure compatibility"
      ],
      "error_handling": "Return empty list if helper not used by any directives.",
      "used_by_directives": [],
      "is_tool": true,
      "is_sub_helper": false,
      "calls_helpers": ["get_directives"],
      "category": "directive_helper_queries"
    },
    {
      "name": "get_directive_tree",
      "file_path": "src/aifp/helpers/mcp/tools/hierarchy_tools.py",
      "database": "aifp_core.db",
      "purpose": "Get complete directive hierarchy tree recursively from a parent directive.",
      "parameters": [
        {
          "name": "parent_name",
          "type": "str",
          "required": true,
          "description": "Parent directive name"
        },
        {
          "name": "max_depth",
          "type": "int",
          "required": false,
          "default": null,
          "description": "Maximum depth to traverse (None = unlimited)"
        }
      ],
      "return_statements": [
        "Returns hierarchical tree structure with directive, depth, children (recursive), total_descendants",
        "Use this to understand full directive family tree and relationships",
        "Depth indicates how far directive is from root in hierarchy",
        "If max_depth specified, tree will only traverse that many levels deep"
      ],
      "error_handling": "Return None if parent directive not found.",
      "used_by_directives": [],
      "is_tool": false,
      "is_sub_helper": false,
      "calls_helpers": [],
      "category": "hierarchy_navigation"
    },
    {
      "name": "get_directive_branch",
      "file_path": "src/aifp/helpers/mcp/tools/hierarchy_tools.py",
      "database": "aifp_core.db",
      "purpose": "Get linear branch from directive to root (ancestors path/breadcrumbs).",
      "parameters": [
        {
          "name": "directive_name",
          "type": "str",
          "required": true,
          "description": "Directive name"
        }
      ],
      "return_statements": [
        "Returns directive, branch array (names from current to root), depth, root name",
        "Branch shows lineage: [current, parent, grandparent, ..., root]",
        "Use this to understand directive's position in hierarchy and trace back to root",
        "Depth indicates how many levels from root"
      ],
      "error_handling": "Return None if directive not found.",
      "used_by_directives": [],
      "is_tool": false,
      "is_sub_helper": false,
      "calls_helpers": [],
      "category": "hierarchy_navigation"
    },
    {
      "name": "get_directive_siblings",
      "file_path": "src/aifp/helpers/mcp/tools/hierarchy_tools.py",
      "database": "aifp_core.db",
      "purpose": "Get all directives that share the same parent (sibling directives).",
      "parameters": [
        {
          "name": "directive_name",
          "type": "str",
          "required": true,
          "description": "Directive name"
        }
      ],
      "return_statements": [
        "Returns directive, parent name, siblings array (names), sibling_count",
        "Siblings are alternative directives at same hierarchy level",
        "Use this to discover related/alternative directives when current one doesn't fit",
        "If sibling_count=0, this directive has no siblings (only child of parent)"
      ],
      "error_handling": "Return None if directive not found.",
      "used_by_directives": [],
      "is_tool": false,
      "is_sub_helper": false,
      "calls_helpers": [],
      "category": "hierarchy_navigation"
    },
    {
      "name": "get_directive_depth",
      "file_path": "src/aifp/helpers/mcp/tools/hierarchy_tools.py",
      "database": "aifp_core.db",
      "purpose": "Get depth level of directive in hierarchy (distance from root).",
      "parameters": [
        {
          "name": "directive_name",
          "type": "str",
          "required": true,
          "description": "Directive name"
        }
      ],
      "return_statements": [
        "Returns directive, depth (int), ancestors array (names), root name",
        "Depth=0 means this is root directive, depth=1 is one level down, etc.",
        "Ancestors show all parent directives from current to root",
        "Use depth to understand directive complexity and hierarchy position"
      ],
      "error_handling": "Return None if directive not found.",
      "used_by_directives": [],
      "is_tool": false,
      "is_sub_helper": false,
      "calls_helpers": [],
      "category": "hierarchy_navigation"
    }
  ]
}
