{
  "helpers": [
    {
      "name": "get_current_commit_hash",
      "file_path": "TODO_helpers/project/module.py",
      "parameters": [
        {
          "name": "project_root",
          "type": "string",
          "required": true,
          "default": null,
          "description": "Project directory path"
        }
      ],
      "purpose": "Get current Git HEAD commit hash",
      "error_handling": "Return null if not Git repository",
      "is_tool": false,
      "is_sub_helper": false,
      "return_statements": [
        "String commit hash or null if Git unavailable"
      ],
      "target_database": "project",
      "used_by_directives": [
        {
          "directive_name": "git_init",
          "execution_context": "get_current_hash_after_init",
          "sequence_order": 3,
          "is_required": true,
          "parameters_mapping": {},
          "description": "Get current Git HEAD to store in project.last_known_git_hash for external change tracking"
        },
        {
          "directive_name": "git_sync_state",
          "execution_context": "get_current_git_hash",
          "sequence_order": 1,
          "is_required": true,
          "parameters_mapping": {},
          "description": "Get current Git HEAD to compare with stored hash and detect external changes"
        }
      ]
    },
    {
      "name": "get_current_branch",
      "file_path": "TODO_helpers/project/module.py",
      "parameters": [
        {
          "name": "project_root",
          "type": "string",
          "required": true,
          "default": null,
          "description": "Project directory path"
        }
      ],
      "purpose": "Get current Git branch name",
      "error_handling": "Return null if Git unavailable",
      "is_tool": false,
      "is_sub_helper": false,
      "return_statements": [
        "String branch name or null"
      ],
      "target_database": "project",
      "used_by_directives": [
        {
          "directive_name": "git_init",
          "execution_context": "report_success",
          "sequence_order": 4,
          "is_required": false,
          "parameters_mapping": {},
          "description": "Display current branch in success report after Git initialization"
        },
        {
          "directive_name": "git_sync_state",
          "execution_context": "return_success",
          "sequence_order": 3,
          "is_required": false,
          "parameters_mapping": {},
          "description": "Display current branch in sync success report"
        }
      ]
    },
    {
      "name": "get_git_status",
      "file_path": "TODO_helpers/project/module.py",
      "parameters": [
        {
          "name": "project_root",
          "type": "string",
          "required": true,
          "default": null,
          "description": "Project directory path"
        }
      ],
      "purpose": "Get comprehensive Git state snapshot (orchestrator)",
      "error_handling": "Returns git_available=false if Git unavailable",
      "is_tool": true,
      "is_sub_helper": false,
      "return_statements": [
        "```json"
      ],
      "target_database": "project",
      "used_by_directives": [
        {
          "directive_name": "git_init",
          "execution_context": "report_success",
          "sequence_order": 4,
          "is_required": false,
          "parameters_mapping": {},
          "description": "Show comprehensive Git status (branch, tracking status, uncommitted files) in initialization success report"
        }
      ]
    },
    {
      "name": "detect_external_changes",
      "file_path": "TODO_helpers/project/module.py",
      "parameters": [
        {
          "name": "project_root",
          "type": "string",
          "required": true,
          "default": null,
          "description": "Project directory path"
        }
      ],
      "purpose": "Compare current Git HEAD with project.last_known_git_hash",
      "error_handling": "Return empty changes if Git unavailable",
      "is_tool": true,
      "is_sub_helper": false,
      "return_statements": [
        "```json"
      ],
      "target_database": "project",
      "used_by_directives": [
        {
          "directive_name": "git_detect_external_changes",
          "execution_context": "self_implementation",
          "sequence_order": 1,
          "is_required": true,
          "parameters_mapping": {},
          "description": "Tool that implements the git_detect_external_changes directive - compares stored hash with current HEAD, analyzes changed files, queries theme/function impact"
        },
        {
          "directive_name": "git_sync_state",
          "execution_context": "compare_hashes",
          "sequence_order": 2,
          "is_required": true,
          "parameters_mapping": {},
          "description": "Detect if external changes occurred during sync - triggers git_detect_external_changes if hash differs"
        }
      ]
    },
    {
      "name": "create_user_branch",
      "file_path": "TODO_helpers/project/module.py",
      "parameters": [
        {
          "name": "user",
          "type": "string",
          "required": true,
          "default": null,
          "description": "Username"
        },
        {
          "name": "purpose",
          "type": "string",
          "required": true,
          "default": null,
          "description": "Branch purpose description"
        }
      ],
      "purpose": "Create work branch following aifp-{user}-{number} convention",
      "error_handling": "Auto-increment number if branch exists",
      "is_tool": true,
      "is_sub_helper": false,
      "return_statements": [
        "```json"
      ],
      "target_database": "project",
      "used_by_directives": [
        {
          "directive_name": "git_create_branch",
          "execution_context": "self_implementation",
          "sequence_order": 1,
          "is_required": true,
          "parameters_mapping": {
            "user": "workflow.detected_user",
            "purpose": "workflow.branch_purpose"
          },
          "description": "Tool that implements git_create_branch directive - detects user, formats branch name (aifp-{user}-{number}), creates Git branch, stores metadata in work_branches table"
        }
      ]
    },
    {
      "name": "get_user_name_for_branch",
      "file_path": "TODO_helpers/project/module.py",
      "parameters": [],
      "purpose": "Detect username from git config/environment/system",
      "error_handling": "Fallback to \"user\" if all detection fails",
      "is_tool": false,
      "is_sub_helper": true,
      "return_statements": [
        "String username (never null)",
        "Checks git config, then environment, then system user"
      ],
      "target_database": "project",
      "used_by_directives": [
        {
          "directive_name": "git_create_branch",
          "execution_context": "get_user_identification",
          "sequence_order": 1,
          "is_required": true,
          "parameters_mapping": {},
          "description": "Detect username from git config, environment variables (USER, USERNAME), or system user - used to format branch name aifp-{user}-{number}"
        }
      ]
    },
    {
      "name": "list_active_branches",
      "file_path": "TODO_helpers/project/module.py",
      "parameters": [],
      "purpose": "List all AIFP work branches from work_branches table",
      "error_handling": "Return empty array if table doesn't exist",
      "is_tool": true,
      "is_sub_helper": false,
      "return_statements": [
        "Array of branch objects with name, created_at, purpose"
      ],
      "target_database": "project",
      "used_by_directives": []
    },
    {
      "name": "detect_conflicts_before_merge",
      "file_path": "TODO_helpers/project/module.py",
      "parameters": [
        {
          "name": "source_branch",
          "type": "string",
          "required": true,
          "default": null,
          "description": "Branch to merge from"
        },
        {
          "name": "project_root",
          "type": "string",
          "required": true,
          "default": null,
          "description": "Project directory path"
        }
      ],
      "purpose": "FP-powered conflict analysis before merging (complex orchestrator)",
      "error_handling": "Fall back to file-level conflicts if DB query fails",
      "is_tool": true,
      "is_sub_helper": false,
      "return_statements": [
        "```json",
        "Queries project.db from both branches for FP analysis"
      ],
      "target_database": "project",
      "used_by_directives": [
        {
          "directive_name": "git_detect_conflicts",
          "execution_context": "self_implementation",
          "sequence_order": 1,
          "is_required": true,
          "parameters_mapping": {},
          "description": "Tool that implements git_detect_conflicts directive - performs dry-run merge analysis, compares branches at file/function level, queries function metadata (purity, dependencies, tests), classifies conflicts, assigns confidence scores for auto-resolution"
        },
        {
          "directive_name": "git_merge_branch",
          "execution_context": "call_git_detect_conflicts",
          "sequence_order": 2,
          "is_required": true,
          "parameters_mapping": {},
          "description": "Called before merge to analyze potential conflicts and determine if auto-resolution possible - prevents merge failures"
        }
      ]
    },
    {
      "name": "merge_with_fp_intelligence",
      "file_path": "TODO_helpers/project/module.py",
      "parameters": [
        {
          "name": "source_branch",
          "type": "string",
          "required": true,
          "default": null,
          "description": "Branch to merge from"
        },
        {
          "name": "project_root",
          "type": "string",
          "required": true,
          "default": null,
          "description": "Project directory path"
        }
      ],
      "purpose": "Git merge with FP-powered conflict auto-resolution (complex orchestrator)",
      "error_handling": "Abort merge (git merge --abort) if unresolvable",
      "is_tool": true,
      "is_sub_helper": false,
      "return_statements": [
        "```json",
        "Auto-resolves conflicts >0.8 confidence using purity rules"
      ],
      "target_database": "project",
      "used_by_directives": [
        {
          "directive_name": "git_merge_branch",
          "execution_context": "self_implementation",
          "sequence_order": 1,
          "is_required": true,
          "parameters_mapping": {},
          "description": "Tool that implements git_merge_branch directive - validates merge request, calls detect_conflicts_before_merge, auto-resolves high-confidence conflicts (>0.8), presents manual conflicts to user with AI recommendations, logs merge history, updates work_branches status"
        }
      ]
    },
    {
      "name": "sync_git_state",
      "file_path": "TODO_helpers/project/module.py",
      "parameters": [
        {
          "name": "project_root",
          "type": "string",
          "required": true,
          "default": null,
          "description": "Project directory path"
        }
      ],
      "purpose": "Update project.last_known_git_hash with current Git HEAD",
      "error_handling": "Log warning if Git unavailable, continue with cached",
      "is_tool": true,
      "is_sub_helper": false,
      "return_statements": [
        "```json",
        "Called after commits and during session boot"
      ],
      "target_database": "project",
      "used_by_directives": [
        {
          "directive_name": "git_sync_state",
          "execution_context": "self_implementation",
          "sequence_order": 1,
          "is_required": true,
          "parameters_mapping": {},
          "description": "Tool that implements git_sync_state directive - gets current Git HEAD, compares with stored hash, triggers external change detection if hash differs, updates last_known_git_hash and last_git_sync timestamp"
        }
      ]
    },
    {
      "name": "project_update_git_status",
      "file_path": "TODO_helpers/project/module.py",
      "parameters": [],
      "purpose": "Update last_known_git_hash and last_git_sync in project table",
      "error_handling": "",
      "is_tool": false,
      "is_sub_helper": true,
      "return_statements": [
        "`{\"success\": true, \"hash\": string, \"sync_time\": timestamp}`",
        "Convenience wrapper for common sync operation"
      ],
      "target_database": "project",
      "used_by_directives": [
        {
          "directive_name": "git_init",
          "execution_context": "update_project_last_known_git_hash",
          "sequence_order": 3,
          "is_required": true,
          "parameters_mapping": {},
          "description": "Store initial Git hash in project table after repository initialization or integration"
        },
        {
          "directive_name": "git_detect_external_changes",
          "execution_context": "update_project_table",
          "sequence_order": 4,
          "is_required": true,
          "parameters_mapping": {},
          "description": "Update stored hash after user acknowledges external changes - keeps tracking in sync"
        },
        {
          "directive_name": "git_sync_state",
          "execution_context": "initialize_hash_or_update_sync_timestamp",
          "sequence_order": 2,
          "is_required": true,
          "parameters_mapping": {},
          "description": "Update last_known_git_hash and last_git_sync timestamp in project table"
        }
      ]
    }
  ],
  "metadata": {
    "file": "helpers-git.json",
    "count": 11,
    "status": "Phase 8 Priority 1 COMPLETE - All 11 git helpers mapped to 6 git directives",
    "mapped_helpers": 11,
    "unmapped_helpers": 0,
    "total_mappings": 17,
    "last_updated": "2025-12-20"
  }
}