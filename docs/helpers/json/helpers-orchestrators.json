{
  "helpers": [
    {
      "name": "aifp_run",
      "file_path": "helpers/orchestrators/orchestrators.py",
      "parameters": [
        {
          "name": "user_request",
          "type": "string",
          "required": true,
          "default": null,
          "description": "The user's natural language request"
        },
        {
          "name": "get_status",
          "type": "boolean",
          "required": false,
          "default": false,
          "description": "Whether to fetch comprehensive status. Use true for first interaction or after major state changes. Use false (default) for continuation work."
        }
      ],
      "purpose": "Main entry point orchestrator. Routes requests and optionally fetches comprehensive status.",
      "error_handling": "Returns error message if database not accessible. Returns empty suggestions if no directives match.",
      "is_tool": true,
      "is_sub_helper": false,
      "return_statements": [],
      "implementation_notes": [
        "Returns: If get_status=true → comprehensive status from aifp_status()",
        "Returns: If get_status=false → lightweight {suggested_directives[], keyword_matches[], next_step_guidance}",
        "Parses user_request for intent keywords to match against directive definitions",
        "Always includes guidance on when to call aifp_run(get_status=true) again"
      ],
      "target_database": "orchestrator",
      "used_by_directives": [
        {
          "directive_name": "aifp_run",
          "execution_context": "self_invocation",
          "sequence_order": 1,
          "is_required": true,
          "parameters_mapping": {},
          "description": "aifp_run directive uses aifp_run helper as entry point orchestrator"
        }
      ]
    },
    {
      "name": "get_current_progress",
      "file_path": "TODO_helpers/orchestrator/module.py",
      "parameters": [
        {
          "name": "scope",
          "type": "string",
          "required": false,
          "default": null,
          "description": "What information to retrieve"
        },
        {
          "name": "detail_level",
          "type": "string",
          "required": false,
          "default": null,
          "description": "How much detail to return"
        },
        {
          "name": "filters",
          "type": "object",
          "required": false,
          "default": null,
          "description": "WHERE-like conditions"
        }
      ],
      "purpose": "Single entry point for all project status queries. Replaces 5-10 separate helper calls with one flexible query.",
      "error_handling": "",
      "is_tool": true,
      "is_sub_helper": false,
      "return_statements": [],
      "implementation_notes": [
        "Returns: Flexible object based on scope and detail_level parameters",
        "Replaces multiple separate queries with unified interface",
        "Filters support: {field: value} or {field: {operator: value}}",
        "Default detail_level='standard' returns reasonable data without overwhelming"
      ],
      "target_database": "orchestrator",
      "used_by_directives": []
    },
    {
      "name": "update_project_state",
      "file_path": "TODO_helpers/orchestrator/module.py",
      "parameters": [
        {
          "name": "action",
          "type": "string",
          "required": true,
          "default": null,
          "description": "Operation to perform"
        },
        {
          "name": "target_type",
          "type": "string",
          "required": true,
          "default": null,
          "description": "Entity type"
        },
        {
          "name": "target_id",
          "type": "integer",
          "required": true,
          "default": null,
          "description": "ID of target entity"
        },
        {
          "name": "data",
          "type": "object",
          "required": false,
          "default": null,
          "description": "Action-specific data"
        },
        {
          "name": "create_note",
          "type": "boolean",
          "required": false,
          "default": null,
          "description": "Auto-log action as note"
        }
      ],
      "purpose": "Single entry point for common project state updates. Simplifies task lifecycle management and progress tracking.",
      "error_handling": "",
      "is_tool": true,
      "is_sub_helper": false,
      "return_statements": [],
      "implementation_notes": [
        "Returns: {success, updated_entity{}, note_created?}",
        "Actions: start_task, complete_task, pause_task, resume_task, block_task, unblock_task",
        "Updates entity status field and related timestamps",
        "If create_note=true → inserts note record automatically",
        "Simplifies common state transitions with action-based interface"
      ],
      "target_database": "orchestrator",
      "used_by_directives": []
    },
    {
      "name": "batch_update_progress",
      "file_path": "TODO_helpers/orchestrator/module.py",
      "parameters": [
        {
          "name": "updates",
          "type": "array",
          "required": true,
          "default": null,
          "description": "List of update operation objects"
        },
        {
          "name": "transaction",
          "type": "boolean",
          "required": false,
          "default": null,
          "description": "All-or-nothing commit vs independent updates"
        },
        {
          "name": "continue_on_error",
          "type": "boolean",
          "required": false,
          "default": null,
          "description": "Stop on first error or continue processing"
        },
        {
          "name": "rollback_on_partial_failure",
          "type": "boolean",
          "required": false,
          "default": null,
          "description": "If transaction=true and any update fails, rollback all"
        }
      ],
      "purpose": "Update multiple project items atomically. Used after code generation or bulk operations to ensure consistency.",
      "error_handling": "",
      "is_tool": true,
      "is_sub_helper": false,
      "return_statements": [],
      "implementation_notes": [
        "Returns: {success, updated_count, failed_count, results[{success, entity, error?}]}",
        "Updates array: [{target_type, target_id, action, data}, ...]",
        "Transaction=true uses database transactions for atomicity",
        "Continue_on_error=true processes all updates even if some fail",
        "Rollback_on_partial_failure=true undoes all if any fail (requires transaction=true)"
      ],
      "target_database": "orchestrator",
      "used_by_directives": []
    },
    {
      "name": "query_project_state",
      "file_path": "TODO_helpers/orchestrator/module.py",
      "parameters": [
        {
          "name": "entity",
          "type": "string",
          "required": true,
          "default": null,
          "description": "Primary table to query"
        },
        {
          "name": "filters",
          "type": "object",
          "required": false,
          "default": null,
          "description": "WHERE-like conditions with operators"
        },
        {
          "name": "joins",
          "type": "array",
          "required": false,
          "default": null,
          "description": "Relations to include (LEFT JOIN)"
        },
        {
          "name": "sort",
          "type": "string",
          "required": false,
          "default": null,
          "description": "ORDER BY clause"
        },
        {
          "name": "limit",
          "type": "integer",
          "required": false,
          "default": null,
          "description": "Maximum results (pagination)"
        },
        {
          "name": "offset",
          "type": "integer",
          "required": false,
          "default": null,
          "description": "Skip first N results (pagination)"
        }
      ],
      "purpose": "Flexible SQL-like query interface for complex project queries. Provides powerful filtering and joining capabilities without writing SQL.",
      "error_handling": "",
      "is_tool": true,
      "is_sub_helper": false,
      "return_statements": [],
      "implementation_notes": [
        "Returns: Array of entity objects with joins embedded",
        "Filters support operators: eq, ne, gt, lt, gte, lte, in, like",
        "Joins uses LEFT JOIN to include related entities",
        "Sort: 'field ASC' or 'field DESC'",
        "Powerful SQL-like interface without writing raw SQL"
      ],
      "target_database": "orchestrator",
      "used_by_directives": []
    },
    {
      "name": "validate_initialization",
      "file_path": "TODO_helpers/orchestrator/module.py",
      "parameters": [
        {
          "name": "aifp_dir",
          "type": "string",
          "required": true,
          "default": null,
          "description": "Path to .aifp-project/ directory"
        }
      ],
      "purpose": "Validate that project initialization is complete and correct. Performs comprehensive structural validation.",
      "error_handling": "",
      "is_tool": true,
      "is_sub_helper": false,
      "return_statements": [],
      "implementation_notes": [
        "Returns: {valid, errors[], warnings[], checked_components{}}",
        "Checks: directory structure, database files, tables, blueprint file",
        "Comprehensive validation - catches missing/corrupted setup",
        "Detailed error reporting for troubleshooting"
      ],
      "target_database": "orchestrator",
      "used_by_directives": [
        {
          "directive_name": "aifp_status",
          "execution_context": "check_initialization_status",
          "sequence_order": 1,
          "is_required": true,
          "parameters_mapping": {
            "aifp_dir": ".aifp-project/"
          },
          "description": "Validate project initialization status before providing status report - checks directory structure, databases, tables, blueprint"
        }
      ]
    },
    {
      "name": "get_work_context",
      "file_path": "TODO_helpers/orchestrator/module.py",
      "parameters": [
        {
          "name": "work_item_type",
          "type": "string",
          "required": true,
          "default": null,
          "description": "Type of work item"
        },
        {
          "name": "work_item_id",
          "type": "integer",
          "required": true,
          "default": null,
          "description": "ID of work item"
        },
        {
          "name": "include_interactions",
          "type": "boolean",
          "required": false,
          "default": null,
          "description": "Include function dependency interactions"
        },
        {
          "name": "include_history",
          "type": "boolean",
          "required": false,
          "default": null,
          "description": "Include note history for work item"
        }
      ],
      "purpose": "Get complete context for resuming work. Single call retrieves task/subtask/sidequest + flows + files + functions + interactions. Optimized for session resumption.",
      "error_handling": "",
      "is_tool": true,
      "is_sub_helper": false,
      "return_statements": [],
      "implementation_notes": [
        "Returns: {work_item{}, flows[], files[], functions[], interactions[]?, notes[]?}",
        "Single optimized query with joins across multiple tables",
        "Include_interactions=true adds function dependency data",
        "Include_history=true adds notes timeline",
        "Optimized for session resumption - all context in one call"
      ],
      "target_database": "orchestrator",
      "used_by_directives": [
        {
          "directive_name": "project_auto_resume",
          "execution_context": "load_work_context",
          "sequence_order": 3,
          "is_required": true,
          "parameters_mapping": {
            "work_item_type": "detected_work_item_type (task, subtask, sidequest)",
            "work_item_id": "last_incomplete_work_item_id",
            "include_interactions": "true",
            "include_history": "true"
          },
          "description": "Load complete work context for resuming interrupted work - retrieves work item details, associated flows, files, functions, interactions, and note history in single optimized query"
        }
      ]
    },
    {
      "name": "aifp_status",
      "file_path": "TODO_helpers/orchestrator/module.py",
      "parameters": [
        {
          "name": "type",
          "type": "string",
          "required": false,
          "default": "summary",
          "description": "'quick', 'summary', 'detailed' - level of detail to return"
        }
      ],
      "purpose": "Status orchestrator optimized for directive navigation decision tree. Returns comprehensive project state with completion flags and next-step suggestions designed to feed the `get_next_directives_from_status()` system.",
      "error_handling": "",
      "is_tool": true,
      "is_sub_helper": false,
      "return_statements": [],
      "implementation_notes": [
        "Returns comprehensive status object with: work_hierarchy, completion_flags, blocked_items[], suggested_next_directives[], progress_metrics, git_state, infrastructure_status",
        "Calls get_project_status() to analyze work hierarchy",
        "Calls get_status_tree() to build hierarchical view",
        "Type='quick': Basic state only",
        "Type='summary': Standard detail (default)",
        "Type='detailed': Full comprehensive analysis"
      ],
      "target_database": "orchestrator",
      "used_by_directives": [
        {
          "directive_name": "aifp_status",
          "execution_context": "self_invocation",
          "sequence_order": 1,
          "is_required": true,
          "parameters_mapping": {},
          "description": "aifp_status directive uses aifp_status helper as main orchestrator - retrieves comprehensive project state, builds priority status tree, checks completion flags, provides next-step suggestions"
        },
        {
          "directive_name": "aifp_run",
          "execution_context": "get_status_when_requested",
          "sequence_order": 2,
          "is_required": false,
          "parameters_mapping": {},
          "description": "Called by aifp_run when get_status=true parameter is passed - provides comprehensive status for fresh context"
        }
      ]
    },
    {
      "name": "get_project_status",
      "file_path": "TODO_helpers/orchestrator/module.py",
      "parameters": [
        {
          "name": "type",
          "type": "string",
          "required": false,
          "default": "summary",
          "description": "'quick', 'summary', 'detailed' - status detail level"
        }
      ],
      "purpose": "Analyze entire work hierarchy and return comprehensive project status",
      "error_handling": "",
      "is_tool": true,
      "is_sub_helper": true,
      "return_statements": [],
      "implementation_notes": [
        "Returns: {completion_path_status, milestones[], tasks[], subtasks[], sidequests[], progress_metrics{}, blocked_items[], unlocked_paths[]}",
        "Analyzes entire work hierarchy - NOT simple field getter",
        "Calculates progress percentages, completion dependencies",
        "Type='quick': Basic counts only",
        "Type='summary': Standard analysis (default)",
        "Type='detailed': Full dependency analysis"
      ],
      "target_database": "orchestrator",
      "used_by_directives": [
        {
          "directive_name": "aifp_status",
          "execution_context": "analyze_work_hierarchy",
          "sequence_order": 2,
          "is_required": true,
          "parameters_mapping": {},
          "description": "Sub-helper used by aifp_status to analyze complete work hierarchy (completion paths, milestones, tasks, subtasks, sidequests) and calculate progress metrics"
        }
      ]
    },
    {
      "name": "get_project_context",
      "file_path": "TODO_helpers/orchestrator/module.py",
      "parameters": [
        {
          "name": "type",
          "type": "string",
          "required": true,
          "default": null,
          "description": "Context type: \"blueprint\", \"metadata\", \"status\", \"infrastructure\""
        }
      ],
      "purpose": "Get structured project overview for different contexts",
      "error_handling": "",
      "is_tool": true,
      "is_sub_helper": false,
      "return_statements": [],
      "implementation_notes": [
        "Returns different structures based on type parameter",
        "Type='blueprint': {blueprint_content, file_path}",
        "Type='metadata': {name, description, use_case, version, settings}",
        "Type='status': {basic_status, work_counts, git_hash}",
        "Type='infrastructure': {helpers[], directives[], settings[]}"
      ],
      "target_database": "orchestrator",
      "used_by_directives": [
        {
          "directive_name": "aifp_help",
          "execution_context": "show_project_info",
          "sequence_order": 13,
          "is_required": false,
          "parameters_mapping": {
            "type": "metadata or infrastructure (based on user query)"
          },
          "description": "Show project metadata or infrastructure when user requests project information - provides structured overview of project setup, settings, available helpers/directives"
        }
      ]
    },
    {
      "name": "get_status_tree",
      "file_path": "TODO_helpers/orchestrator/module.py",
      "parameters": [],
      "purpose": "Get hierarchical view of all work items with nested structure",
      "error_handling": "",
      "is_tool": true,
      "is_sub_helper": true,
      "return_statements": [],
      "implementation_notes": [
        "Returns: Nested tree structure with work items embedded under parents",
        "Format: {completion_path{milestones[{tasks[{subtasks[]}]}]}, sidequests[]}",
        "Maintains parent-child relationships for visualization",
        "Used for status display, not for queries"
      ],
      "target_database": "orchestrator",
      "used_by_directives": [
        {
          "directive_name": "aifp_status",
          "execution_context": "build_status_tree",
          "sequence_order": 3,
          "is_required": true,
          "parameters_mapping": {},
          "description": "Sub-helper used by aifp_status to build hierarchical tree view of work items with nested structure - used for priority status display"
        }
      ]
    },
    {
      "name": "get_files_by_flow_context",
      "file_path": "TODO_helpers/orchestrator/module.py",
      "parameters": [
        {
          "name": "flow_id",
          "type": "integer",
          "required": true,
          "default": null,
          "description": "Flow ID"
        }
      ],
      "purpose": "Get all files for a flow with functions embedded",
      "error_handling": "",
      "is_tool": false,
      "is_sub_helper": false,
      "return_statements": [],
      "implementation_notes": [
        "Returns: Array of file objects with functions[] embedded",
        "Queries file_flows table for flow_id, retrieves associated files",
        "For each file, embeds functions from functions table",
        "Provides complete view of flow implementation"
      ],
      "target_database": "orchestrator",
      "used_by_directives": [
        {
          "directive_name": "project_dependency_map",
          "execution_context": "map_flow_dependencies",
          "sequence_order": 6,
          "is_required": true,
          "parameters_mapping": {
            "flow_id": "current_flow_id_from_flows_loop"
          },
          "description": "Get all files implementing a flow with embedded functions - used to build dependency map showing file-flow-function relationships"
        }
      ]
    }
  ],
  "metadata": {
    "file": "helpers-orchestrators.json",
    "count": 12,
    "status": "COMPLETED - used_by_directives review complete",
    "mapped_helpers": 8,
    "unmapped_helpers": 4,
    "note": "4 helpers are generic AI query/convenience tools (get_current_progress, update_project_state, batch_update_progress, query_project_state) - intentionally empty. 8 helpers mapped to orchestrator directives (aifp_run, aifp_status) and directives that need orchestration (project_auto_resume, project_dependency_map, aifp_help).",
    "total_mappings": 9,
    "last_updated": "2026-01-01"
  }
}