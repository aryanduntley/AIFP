{
  "flows": [
    {
      "from_directive": "aifp_run",
      "to_directive": "aifp_status",
      "flow_type": "status_branch",
      "condition_key": "is_new_session",
      "condition_value": "true",
      "condition_description": "is_new_session parameter is true (new session start, first interaction, or after long break)",
      "priority": 100,
      "description": "Entry point routes to status for new sessions to bundle comprehensive startup data",
      "flow_category": "project"
    },
    {
      "from_directive": "aifp_run",
      "to_directive": "user_preferences_sync",
      "flow_type": "conditional",
      "condition_key": "directive_is_customizable",
      "condition_value": "true",
      "condition_description": "Load user preferences before any customizable directive execution",
      "priority": 100,
      "description": "Preferences loaded before executing directives that can be customized",
      "flow_category": "project"
    },
    {
      "from_directive": "aifp_run",
      "to_directive": "aifp_help",
      "flow_type": "conditional",
      "condition_key": "user_requests_help",
      "condition_value": "true",
      "condition_description": "User asks for help or directive documentation",
      "priority": 90,
      "description": "User needs directive help/documentation",
      "flow_category": "project"
    },
    {
      "from_directive": "aifp_status",
      "to_directive": "aifp_help",
      "flow_type": "conditional",
      "condition_key": "directive_guidance_needed",
      "condition_value": "true",
      "condition_description": "AI needs directive clarification during work",
      "priority": 70,
      "description": "AI uncertain about directive usage - fetch documentation",
      "flow_category": "project"
    },
    {
      "from_directive": "aifp_help",
      "to_directive": "aifp_status",
      "flow_type": "completion_loop",
      "condition_key": null,
      "condition_value": null,
      "condition_description": "Help/documentation provided",
      "priority": 100,
      "description": "Directive guidance loaded, return to status",
      "flow_category": "project"
    },
    {
      "from_directive": "aifp_status",
      "to_directive": "git_detect_external_changes",
      "flow_type": "canonical",
      "condition_key": "session_start",
      "condition_value": "true",
      "condition_description": "Always sync git state on session start",
      "priority": 100,
      "description": "Git sync is standard workflow - detect changes made outside AIFP",
      "flow_category": "git"
    },
    {
      "from_directive": "aifp_status",
      "to_directive": "project_init",
      "flow_type": "conditional",
      "condition_key": "project_initialized",
      "condition_value": "false",
      "condition_description": "No .aifp-project/ folder found and no git backup",
      "priority": 100,
      "description": "Project not initialized - initialize first",
      "flow_category": "project"
    },
    {
      "from_directive": "aifp_status",
      "to_directive": "user_directive_parse",
      "flow_type": "conditional",
      "condition_key": "user_directives_status",
      "condition_value": "null_and_directive_files_exist",
      "condition_description": "Use Case 2: User provided directive files but not yet parsed",
      "priority": 100,
      "description": "Detect Use Case 2 - parse user directive files",
      "flow_category": "project"
    },
    {
      "from_directive": "project_init",
      "to_directive": "aifp_status",
      "flow_type": "completion_loop",
      "condition_key": "initialization_successful",
      "condition_value": "true",
      "condition_description": "Initialization complete successfully",
      "priority": 100,
      "description": "After successful init, loop back to status to determine next action",
      "flow_category": "project"
    },
    {
      "from_directive": "project_init",
      "to_directive": "aifp_status",
      "flow_type": "error_handler",
      "condition_key": "oop_detected_in_existing_code",
      "condition_value": "true",
      "condition_description": "OOP patterns detected in existing codebase - initialization aborted",
      "priority": 100,
      "description": "OOP detected - abort init and return to status with error message",
      "flow_category": "project"
    },
    {
      "from_directive": "aifp_status",
      "to_directive": "project_task_decomposition",
      "flow_type": "conditional",
      "condition_key": "has_incomplete_tasks",
      "condition_value": "false",
      "condition_description": "Project initialized but no tasks exist",
      "priority": 90,
      "description": "No tasks found - create initial task hierarchy from blueprint",
      "flow_category": "project"
    },
    {
      "from_directive": "project_task_decomposition",
      "to_directive": "aifp_status",
      "flow_type": "completion_loop",
      "condition_key": null,
      "condition_value": null,
      "condition_description": "Task decomposition complete",
      "priority": 100,
      "description": "After creating tasks, loop back to status to show new tasks",
      "flow_category": "project"
    },
    {
      "from_directive": "aifp_status",
      "to_directive": "project_task_update",
      "flow_type": "conditional",
      "condition_key": "user_requests_task_update",
      "condition_value": "true",
      "condition_description": "User wants to update task progress/status without completing",
      "priority": 75,
      "description": "Track incremental task progress updates",
      "flow_category": "project"
    },
    {
      "from_directive": "project_task_update",
      "to_directive": "aifp_status",
      "flow_type": "completion_loop",
      "condition_key": null,
      "condition_value": null,
      "condition_description": "Task updated",
      "priority": 100,
      "description": "Task progress updated, loop back to status",
      "flow_category": "project"
    },
    {
      "from_directive": "aifp_status",
      "to_directive": "project_file_write",
      "flow_type": "conditional",
      "condition_key": "has_incomplete_items",
      "condition_value": "true",
      "condition_description": "Active work exists and user requests code work",
      "priority": 80,
      "description": "Active work detected - proceed with file operations",
      "flow_category": "project"
    },
    {
      "from_directive": "project_file_write",
      "to_directive": "git_sync_state",
      "flow_type": "canonical",
      "condition_key": null,
      "condition_value": null,
      "condition_description": "Always sync git after file write",
      "priority": 100,
      "description": "Update last_known_git_hash after file operations",
      "flow_category": "git"
    },
    {
      "from_directive": "project_file_write",
      "to_directive": "project_reserve_finalize",
      "flow_type": "canonical",
      "condition_key": null,
      "condition_value": null,
      "condition_description": "Reserve file/function IDs before database writes",
      "priority": 100,
      "description": "Pre-allocate IDs to avoid database conflicts",
      "flow_category": "project"
    },
    {
      "from_directive": "project_reserve_finalize",
      "to_directive": "project_update_db",
      "flow_type": "canonical",
      "condition_key": null,
      "condition_value": null,
      "condition_description": "After reserving IDs, proceed with database update",
      "priority": 100,
      "description": "Sync files, functions, interactions tables with reserved IDs",
      "flow_category": "project"
    },
    {
      "from_directive": "aifp_status",
      "to_directive": "project_file_read",
      "flow_type": "conditional",
      "condition_key": "file_context_needed",
      "condition_value": "true",
      "condition_description": "Need to read file content to gather context for work",
      "priority": 70,
      "description": "Read file with project context before making changes",
      "flow_category": "project"
    },
    {
      "from_directive": "project_file_read",
      "to_directive": "aifp_status",
      "flow_type": "completion_loop",
      "condition_key": null,
      "condition_value": null,
      "condition_description": "File read complete",
      "priority": 100,
      "description": "File content loaded, return context to status",
      "flow_category": "project"
    },
    {
      "from_directive": "aifp_status",
      "to_directive": "project_file_delete",
      "flow_type": "conditional",
      "condition_key": "user_requests_file_delete",
      "condition_value": "true",
      "condition_description": "User wants to remove file from project",
      "priority": 75,
      "description": "Delete file and cleanup database references",
      "flow_category": "project"
    },
    {
      "from_directive": "project_file_delete",
      "to_directive": "aifp_status",
      "flow_type": "completion_loop",
      "condition_key": null,
      "condition_value": null,
      "condition_description": "File deleted, database cleaned up",
      "priority": 100,
      "description": "File removed from disk and database, loop back",
      "flow_category": "project"
    },
    {
      "from_directive": "aifp_status",
      "to_directive": "project_add_path",
      "flow_type": "conditional",
      "condition_key": "user_adds_existing_file",
      "condition_value": "true",
      "condition_description": "User wants to track existing file in AIFP",
      "priority": 70,
      "description": "Add existing file to AIFP project tracking",
      "flow_category": "project"
    },
    {
      "from_directive": "project_add_path",
      "to_directive": "aifp_status",
      "flow_type": "completion_loop",
      "condition_key": null,
      "condition_value": null,
      "condition_description": "File added to tracking",
      "priority": 100,
      "description": "Existing file now tracked by AIFP, loop back",
      "flow_category": "project"
    },
    {
      "from_directive": "project_task_complete",
      "to_directive": "project_milestone_complete",
      "flow_type": "conditional",
      "condition_key": "all_milestone_tasks_complete",
      "condition_value": "true",
      "condition_description": "All tasks in milestone marked complete",
      "priority": 100,
      "description": "Auto-detect milestone completion and delegate to milestone complete directive",
      "flow_category": "project"
    },
    {
      "from_directive": "project_task_complete",
      "to_directive": "aifp_status",
      "flow_type": "completion_loop",
      "condition_key": "all_milestone_tasks_complete",
      "condition_value": "false",
      "condition_description": "Task complete but milestone still has incomplete tasks",
      "priority": 100,
      "description": "Task done, loop back to status to show next task in milestone",
      "flow_category": "project"
    },
    {
      "from_directive": "project_subtask_complete",
      "to_directive": "aifp_status",
      "flow_type": "completion_loop",
      "condition_key": null,
      "condition_value": null,
      "condition_description": "Subtask complete, resume parent task",
      "priority": 100,
      "description": "Subtask done, loop back to status to show parent task context",
      "flow_category": "project"
    },
    {
      "from_directive": "project_sidequest_complete",
      "to_directive": "aifp_status",
      "flow_type": "completion_loop",
      "condition_key": null,
      "condition_value": null,
      "condition_description": "Sidequest complete, resume original work",
      "priority": 100,
      "description": "Sidequest done, loop back to status to resume original task",
      "flow_category": "project"
    },
    {
      "from_directive": "project_milestone_complete",
      "to_directive": "aifp_status",
      "flow_type": "completion_loop",
      "condition_key": null,
      "condition_value": null,
      "condition_description": "Milestone complete",
      "priority": 100,
      "description": "Milestone done, loop back to status to show next milestone or completion_path progress",
      "flow_category": "project"
    },
    {
      "from_directive": "aifp_status",
      "to_directive": "project_completion_check",
      "flow_type": "conditional",
      "condition_key": "all_milestones_complete",
      "condition_value": "true",
      "condition_description": "All milestones complete, no incomplete items",
      "priority": 90,
      "description": "All work complete - validate completion criteria",
      "flow_category": "project"
    },
    {
      "from_directive": "project_completion_check",
      "to_directive": "project_archive",
      "flow_type": "conditional",
      "condition_key": "completion_criteria_met",
      "condition_value": "true",
      "condition_description": "Project meets all completion criteria",
      "priority": 80,
      "description": "Completion validated - proceed to archive",
      "flow_category": "project"
    },
    {
      "from_directive": "project_completion_check",
      "to_directive": "aifp_status",
      "flow_type": "completion_loop",
      "condition_key": "completion_criteria_met",
      "condition_value": "false",
      "condition_description": "Gaps found, not ready for completion",
      "priority": 100,
      "description": "Completion validation failed - loop back to create missing work",
      "flow_category": "project"
    },
    {
      "from_directive": "aifp_status",
      "to_directive": "project_task_create",
      "flow_type": "conditional",
      "condition_key": "user_requests_new_task",
      "condition_value": "true",
      "condition_description": "User explicitly requests new task creation",
      "priority": 70,
      "description": "User wants to create specific task",
      "flow_category": "project"
    },
    {
      "from_directive": "project_task_create",
      "to_directive": "project_item_create",
      "flow_type": "canonical",
      "condition_key": null,
      "condition_value": null,
      "condition_description": "Auto-create task items when task is created",
      "priority": 100,
      "description": "Task created - immediately auto-create items for work tracking",
      "flow_category": "project"
    },
    {
      "from_directive": "project_item_create",
      "to_directive": "aifp_status",
      "flow_type": "completion_loop",
      "condition_key": null,
      "condition_value": null,
      "condition_description": "Items created",
      "priority": 100,
      "description": "Task items created, loop back to status",
      "flow_category": "project"
    },
    {
      "from_directive": "aifp_status",
      "to_directive": "project_item_create",
      "flow_type": "conditional",
      "condition_key": "user_requests_new_item",
      "condition_value": "true",
      "condition_description": "User manually adds item to existing task",
      "priority": 70,
      "description": "Manual item creation for existing task",
      "flow_category": "project"
    },
    {
      "from_directive": "aifp_status",
      "to_directive": "project_subtask_create",
      "flow_type": "conditional",
      "condition_key": "task_needs_decomposition",
      "condition_value": "true",
      "condition_description": "Task too large, needs breakdown into subtasks",
      "priority": 75,
      "description": "Task decomposition needed",
      "flow_category": "project"
    },
    {
      "from_directive": "project_subtask_create",
      "to_directive": "aifp_status",
      "flow_type": "completion_loop",
      "condition_key": null,
      "condition_value": null,
      "condition_description": "Subtask created",
      "priority": 100,
      "description": "Subtask created, loop back to status",
      "flow_category": "project"
    },
    {
      "from_directive": "aifp_status",
      "to_directive": "project_sidequest_create",
      "flow_type": "conditional",
      "condition_key": "unexpected_work_discovered",
      "condition_value": "true",
      "condition_description": "Unexpected work discovered during task execution",
      "priority": 75,
      "description": "Unexpected work needs tracking as sidequest",
      "flow_category": "project"
    },
    {
      "from_directive": "project_sidequest_create",
      "to_directive": "aifp_status",
      "flow_type": "completion_loop",
      "condition_key": null,
      "condition_value": null,
      "condition_description": "Sidequest created",
      "priority": 100,
      "description": "Sidequest created, loop back to status",
      "flow_category": "project"
    },
    {
      "from_directive": "user_directive_parse",
      "to_directive": "user_directive_validate",
      "flow_type": "canonical",
      "condition_key": null,
      "condition_value": null,
      "condition_description": "Use Case 2: After parsing, validate directives",
      "priority": 100,
      "description": "Parsed directives must be validated via Q&A",
      "flow_category": "project"
    },
    {
      "from_directive": "user_directive_validate",
      "to_directive": "aifp_status",
      "flow_type": "completion_loop",
      "condition_key": null,
      "condition_value": null,
      "condition_description": "Use Case 2: Validation complete, project.user_directives_status set to in_progress",
      "priority": 100,
      "description": "Validation done, loop to status (now in Use Case 2 mode)",
      "flow_category": "project"
    },
    {
      "from_directive": "aifp_status",
      "to_directive": "user_directive_implement",
      "flow_type": "conditional",
      "condition_key": "user_directives_status",
      "condition_value": "in_progress",
      "condition_description": "Use Case 2: Directives validated, infrastructure generation needed",
      "priority": 100,
      "description": "Generate entire codebase for directive execution infrastructure",
      "flow_category": "project"
    },
    {
      "from_directive": "user_directive_implement",
      "to_directive": "project_file_write",
      "flow_type": "canonical",
      "condition_key": null,
      "condition_value": null,
      "condition_description": "Use Case 2: AI generates infrastructure files",
      "priority": 100,
      "description": "AI self-manages project, generates all infrastructure code",
      "flow_category": "project"
    },
    {
      "from_directive": "user_directive_implement",
      "to_directive": "user_directive_approve",
      "flow_type": "conditional",
      "condition_key": "infrastructure_generation_complete",
      "condition_value": "true",
      "condition_description": "Use Case 2: All infrastructure code generated",
      "priority": 100,
      "description": "Infrastructure complete, present for user approval",
      "flow_category": "project"
    },
    {
      "from_directive": "user_directive_approve",
      "to_directive": "user_directive_activate",
      "flow_type": "conditional",
      "condition_key": "user_approves",
      "condition_value": "true",
      "condition_description": "Use Case 2: User tested and approved generated infrastructure",
      "priority": 100,
      "description": "User approved, activate directive execution",
      "flow_category": "project"
    },
    {
      "from_directive": "user_directive_approve",
      "to_directive": "project_file_write",
      "flow_type": "conditional",
      "condition_key": "user_approves",
      "condition_value": "false",
      "condition_description": "Use Case 2: User requests modifications",
      "priority": 90,
      "description": "User feedback - AI modifies code and re-presents",
      "flow_category": "project"
    },
    {
      "from_directive": "user_directive_activate",
      "to_directive": "aifp_status",
      "flow_type": "completion_loop",
      "condition_key": null,
      "condition_value": null,
      "condition_description": "Use Case 2: Directives activated, project.user_directives_status = active",
      "priority": 100,
      "description": "Activation complete, project now in monitoring mode",
      "flow_category": "project"
    },
    {
      "from_directive": "aifp_status",
      "to_directive": "user_directive_monitor",
      "flow_type": "conditional",
      "condition_key": "user_directives_status",
      "condition_value": "active",
      "condition_description": "Use Case 2: Directives active, ongoing monitoring",
      "priority": 80,
      "description": "Monitor directive execution, track errors and successes",
      "flow_category": "project"
    },
    {
      "from_directive": "user_directive_monitor",
      "to_directive": "user_directive_update",
      "flow_type": "conditional",
      "condition_key": "directive_file_changed",
      "condition_value": "true",
      "condition_description": "Use Case 2: User modified directive files",
      "priority": 90,
      "description": "Directive files changed - re-parse and update infrastructure",
      "flow_category": "project"
    },
    {
      "from_directive": "user_directive_update",
      "to_directive": "project_file_write",
      "flow_type": "canonical",
      "condition_key": null,
      "condition_value": null,
      "condition_description": "Use Case 2: Apply infrastructure changes",
      "priority": 100,
      "description": "Update infrastructure code based on directive changes",
      "flow_category": "project"
    },
    {
      "from_directive": "user_directive_update",
      "to_directive": "aifp_status",
      "flow_type": "completion_loop",
      "condition_key": null,
      "condition_value": null,
      "condition_description": "Use Case 2: Updates applied",
      "priority": 100,
      "description": "Directive updates complete, back to monitoring",
      "flow_category": "project"
    },
    {
      "from_directive": "aifp_status",
      "to_directive": "project_blueprint_read",
      "flow_type": "conditional",
      "condition_key": "blueprint_context_needed",
      "condition_value": "true",
      "condition_description": "Need to read ProjectBlueprint.md for context",
      "priority": 70,
      "description": "Load blueprint for project context",
      "flow_category": "project"
    },
    {
      "from_directive": "project_blueprint_read",
      "to_directive": "aifp_status",
      "flow_type": "completion_loop",
      "condition_key": null,
      "condition_value": null,
      "condition_description": "Blueprint read complete",
      "priority": 100,
      "description": "Blueprint loaded, return to status with context",
      "flow_category": "project"
    },
    {
      "from_directive": "aifp_status",
      "to_directive": "project_blueprint_update",
      "flow_type": "conditional",
      "condition_key": "blueprint_update_needed",
      "condition_value": "true",
      "condition_description": "Project goals/scope changed, blueprint needs update",
      "priority": 75,
      "description": "Update blueprint to reflect project evolution",
      "flow_category": "project"
    },
    {
      "from_directive": "project_blueprint_update",
      "to_directive": "aifp_status",
      "flow_type": "completion_loop",
      "condition_key": null,
      "condition_value": null,
      "condition_description": "Blueprint updated",
      "priority": 100,
      "description": "Blueprint updated, loop back to status",
      "flow_category": "project"
    },
    {
      "from_directive": "project_file_write",
      "to_directive": "project_compliance_check",
      "flow_type": "conditional",
      "condition_key": "auto_check_compliance_enabled",
      "condition_value": "true",
      "condition_description": "Auto-check enabled in user preferences (opt-in)",
      "priority": 80,
      "description": "Optional FP compliance validation (user preference: auto-check after write)",
      "flow_category": "project"
    },
    {
      "from_directive": "project_compliance_check",
      "to_directive": "project_file_write",
      "flow_type": "conditional",
      "condition_key": "violations_found",
      "condition_value": "true",
      "condition_description": "FP violations detected, auto-fix enabled",
      "priority": 90,
      "description": "Auto-fix FP violations and rewrite file",
      "flow_category": "project"
    },
    {
      "from_directive": "project_compliance_check",
      "to_directive": "aifp_status",
      "flow_type": "completion_loop",
      "condition_key": "violations_found",
      "condition_value": "false",
      "condition_description": "No violations or violations reported only",
      "priority": 100,
      "description": "Compliance check complete",
      "flow_category": "project"
    },
    {
      "from_directive": "aifp_status",
      "to_directive": "project_compliance_check",
      "flow_type": "conditional",
      "condition_key": "user_requests_compliance_check",
      "condition_value": "true",
      "condition_description": "User explicitly requests compliance check",
      "priority": 70,
      "description": "On-demand compliance check when user requests validation",
      "flow_category": "project"
    },
    {
      "from_directive": "project_milestone_complete",
      "to_directive": "project_compliance_check",
      "flow_type": "conditional",
      "condition_key": "milestone_quality_gate_enabled",
      "condition_value": "true",
      "condition_description": "Quality gate before milestone completion (opt-in)",
      "priority": 90,
      "description": "Optional quality gate: check compliance before marking milestone complete",
      "flow_category": "project"
    },
    {
      "from_directive": "aifp_status",
      "to_directive": "project_error_handling",
      "flow_type": "error_handler",
      "condition_key": "errors_detected",
      "condition_value": "true",
      "condition_description": "Errors or roadblocks detected during work",
      "priority": 70,
      "description": "Handle errors and provide resolution guidance",
      "flow_category": "project"
    },
    {
      "from_directive": "project_error_handling",
      "to_directive": "aifp_status",
      "flow_type": "completion_loop",
      "condition_key": null,
      "condition_value": null,
      "condition_description": "Error handling complete",
      "priority": 100,
      "description": "Error resolved or escalated, return to status",
      "flow_category": "project"
    },
    {
      "from_directive": "aifp_status",
      "to_directive": "project_metrics",
      "flow_type": "conditional",
      "condition_key": "user_requests_metrics",
      "condition_value": "true",
      "condition_description": "User wants project metrics analysis",
      "priority": 60,
      "description": "Generate project metrics report",
      "flow_category": "project"
    },
    {
      "from_directive": "project_metrics",
      "to_directive": "aifp_status",
      "flow_type": "completion_loop",
      "condition_key": null,
      "condition_value": null,
      "condition_description": "Metrics generated",
      "priority": 100,
      "description": "Metrics reported, return to status",
      "flow_category": "project"
    },
    {
      "from_directive": "aifp_status",
      "to_directive": "project_evolution",
      "flow_type": "conditional",
      "condition_key": "significant_changes_detected",
      "condition_value": "true",
      "condition_description": "Track project evolution after significant architectural changes",
      "priority": 60,
      "description": "Log project evolution patterns and decisions",
      "flow_category": "project"
    },
    {
      "from_directive": "project_evolution",
      "to_directive": "aifp_status",
      "flow_type": "completion_loop",
      "condition_key": null,
      "condition_value": null,
      "condition_description": "Evolution tracked",
      "priority": 100,
      "description": "Project evolution logged, return to status",
      "flow_category": "project"
    },
    {
      "from_directive": "aifp_status",
      "to_directive": "project_dependency_sync",
      "flow_type": "conditional",
      "condition_key": "dependencies_need_sync",
      "condition_value": "true",
      "condition_description": "Package dependencies changed or out of sync",
      "priority": 70,
      "description": "Sync project dependencies with package manager",
      "flow_category": "project"
    },
    {
      "from_directive": "project_dependency_sync",
      "to_directive": "aifp_status",
      "flow_type": "completion_loop",
      "condition_key": null,
      "condition_value": null,
      "condition_description": "Dependencies synced",
      "priority": 100,
      "description": "Dependencies updated, return to status",
      "flow_category": "project"
    },
    {
      "from_directive": "aifp_status",
      "to_directive": "project_integrity_check",
      "flow_type": "conditional",
      "condition_key": "user_requests_integrity_check",
      "condition_value": "true",
      "condition_description": "User wants to validate database integrity",
      "priority": 60,
      "description": "Validate project database integrity",
      "flow_category": "project"
    },
    {
      "from_directive": "project_integrity_check",
      "to_directive": "aifp_status",
      "flow_type": "completion_loop",
      "condition_key": null,
      "condition_value": null,
      "condition_description": "Integrity check complete",
      "priority": 100,
      "description": "Database integrity validated, return to status",
      "flow_category": "project"
    },
    {
      "from_directive": "aifp_status",
      "to_directive": "project_auto_resume",
      "flow_type": "conditional",
      "condition_key": "session_start_with_incomplete_work",
      "condition_value": "true",
      "condition_description": "New session with incomplete work items from previous session",
      "priority": 80,
      "description": "Auto-resume work from where it was left off",
      "flow_category": "project"
    },
    {
      "from_directive": "project_auto_resume",
      "to_directive": "aifp_status",
      "flow_type": "completion_loop",
      "condition_key": null,
      "condition_value": null,
      "condition_description": "Work context restored",
      "priority": 100,
      "description": "Previous work context loaded, return to status",
      "flow_category": "project"
    },
    {
      "from_directive": "aifp_status",
      "to_directive": "project_auto_summary",
      "flow_type": "conditional",
      "condition_key": "user_requests_summary",
      "condition_value": "true",
      "condition_description": "User wants auto-generated progress summary",
      "priority": 60,
      "description": "Generate automated progress summary",
      "flow_category": "project"
    },
    {
      "from_directive": "project_auto_summary",
      "to_directive": "aifp_status",
      "flow_type": "completion_loop",
      "condition_key": null,
      "condition_value": null,
      "condition_description": "Summary generated",
      "priority": 100,
      "description": "Progress summary generated, return to status",
      "flow_category": "project"
    },
    {
      "from_directive": "aifp_status",
      "to_directive": "project_dependency_map",
      "flow_type": "conditional",
      "condition_key": "user_requests_dependency_visualization",
      "condition_value": "true",
      "condition_description": "User wants dependency visualization",
      "priority": 60,
      "description": "Generate dependency map visualization",
      "flow_category": "project"
    },
    {
      "from_directive": "project_dependency_map",
      "to_directive": "aifp_status",
      "flow_type": "completion_loop",
      "condition_key": null,
      "condition_value": null,
      "condition_description": "Dependency map generated",
      "priority": 100,
      "description": "Dependency visualization created, return to status",
      "flow_category": "project"
    },
    {
      "from_directive": "aifp_status",
      "to_directive": "project_theme_flow_mapping",
      "flow_type": "conditional",
      "condition_key": "user_requests_theme_flow_analysis",
      "condition_value": "true",
      "condition_description": "User wants theme/flow mapping analysis",
      "priority": 60,
      "description": "Analyze and map project themes and flows",
      "flow_category": "project"
    },
    {
      "from_directive": "project_theme_flow_mapping",
      "to_directive": "aifp_status",
      "flow_type": "completion_loop",
      "condition_key": null,
      "condition_value": null,
      "condition_description": "Theme/flow mapping complete",
      "priority": 100,
      "description": "Theme and flow analysis complete, return to status",
      "flow_category": "project"
    },
    {
      "from_directive": "aifp_status",
      "to_directive": "project_backup_restore",
      "flow_type": "conditional",
      "condition_key": "user_requests_backup_or_restore",
      "condition_value": "true",
      "condition_description": "User wants to backup or restore project state",
      "priority": 70,
      "description": "Backup project to .git/.aifp/ or restore from backup",
      "flow_category": "project"
    },
    {
      "from_directive": "project_backup_restore",
      "to_directive": "aifp_status",
      "flow_type": "completion_loop",
      "condition_key": null,
      "condition_value": null,
      "condition_description": "Backup/restore operation complete",
      "priority": 100,
      "description": "Backup created or restore complete, return to status",
      "flow_category": "project"
    },
    {
      "from_directive": "aifp_status",
      "to_directive": "project_refactor_path",
      "flow_type": "conditional",
      "condition_key": "user_requests_path_refactor",
      "condition_value": "true",
      "condition_description": "User wants to refactor file paths across project",
      "priority": 70,
      "description": "Refactor file paths and update database references",
      "flow_category": "project"
    },
    {
      "from_directive": "project_refactor_path",
      "to_directive": "aifp_status",
      "flow_type": "completion_loop",
      "condition_key": null,
      "condition_value": null,
      "condition_description": "Path refactoring complete",
      "priority": 100,
      "description": "Paths refactored and database updated, return to status",
      "flow_category": "project"
    },
    {
      "from_directive": "aifp_status",
      "to_directive": "project_performance_summary",
      "flow_type": "conditional",
      "condition_key": "helper_function_logging_enabled",
      "condition_value": "true",
      "condition_description": "Performance tracking opt-in via tracking_toggle (user preference)",
      "priority": 60,
      "description": "Generate performance summary (TRACKING OPT-IN ONLY)",
      "flow_category": "project"
    },
    {
      "from_directive": "project_performance_summary",
      "to_directive": "aifp_status",
      "flow_type": "completion_loop",
      "condition_key": null,
      "condition_value": null,
      "condition_description": "Performance summary generated",
      "priority": 100,
      "description": "Directive performance metrics logged, return to status",
      "flow_category": "project"
    },
    {
      "from_directive": "git_create_branch",
      "to_directive": "aifp_status",
      "flow_type": "completion_loop",
      "condition_key": null,
      "condition_value": null,
      "condition_description": "Branch created for collaborative work",
      "priority": 100,
      "description": "Work branch created, proceed with work on branch",
      "flow_category": "git"
    },
    {
      "from_directive": "git_detect_conflicts",
      "to_directive": "git_merge_branch",
      "flow_type": "conditional",
      "condition_key": "conflicts_detected_and_auto_resolvable",
      "condition_value": "true",
      "condition_description": "Conflicts detected with high confidence resolution (FP-powered)",
      "priority": 90,
      "description": "Auto-resolve conflicts using FP purity analysis",
      "flow_category": "git"
    },
    {
      "from_directive": "git_detect_conflicts",
      "to_directive": "project_user_referral",
      "flow_type": "conditional",
      "condition_key": "conflicts_detected_and_manual_resolution_needed",
      "condition_value": "true",
      "condition_description": "Conflicts detected with low confidence, need user input",
      "priority": 90,
      "description": "Escalate to user for manual conflict resolution",
      "flow_category": "git"
    },
    {
      "from_directive": "git_merge_branch",
      "to_directive": "aifp_status",
      "flow_type": "completion_loop",
      "condition_key": null,
      "condition_value": null,
      "condition_description": "Branch merge complete",
      "priority": 100,
      "description": "Merge complete, git_sync_state updated",
      "flow_category": "git"
    },
    {
      "from_directive": "project_user_referral",
      "to_directive": "aifp_status",
      "flow_type": "completion_loop",
      "condition_key": null,
      "condition_value": null,
      "condition_description": "User decision received",
      "priority": 100,
      "description": "User provided decision, continue work",
      "flow_category": "project"
    }
  ],
  "metadata": {
    "version": "1.2.0",
    "created": "2025-12-17",
    "updated": "2025-12-19",
    "phase": "Phase 2-3 Complete",
    "total_flows": 89,
    "flow_types": {
      "status_branch": "Flow from status to next directive based on state",
      "completion_loop": "Flow back to aifp_status after state change",
      "conditional": "Flow based on specific conditions",
      "canonical": "Standard workflow sequence",
      "error_handler": "Flow to handle errors/roadblocks"
    },
    "priority_levels": {
      "100": "Critical/mandatory flows",
      "90": "High priority conditional flows",
      "80": "Standard conditional flows",
      "70": "Secondary workflows",
      "60": "Optional/analysis workflows"
    },
    "coverage": {
      "use_case_1": "Regular software development workflows",
      "use_case_2": "User directive automation workflows",
      "git_integration": "Git sync and collaboration workflows",
      "user_preferences": "Preference loading integration",
      "completion_loops": "All completion directives loop back to aifp_status",
      "fp_directives": "Not included - FP directives are reference documentation, not execution flow"
    },
    "notes": [
      "All completion directives (task_complete, subtask_complete, sidequest_complete, milestone_complete) loop back to aifp_status",
      "Git integration is standard workflow, not conditional",
      "User preferences loaded before customizable directive execution",
      "Use Case 2 detection via project.user_directives_status field",
      "FP directives not in flow - they are reference documentation consulted inline",
      "FP compliance checking is OPT-IN ONLY (default = AI writes FP code automatically)",
      "Performance tracking is OPT-IN ONLY (helper_function_logging_enabled user preference)",
      "All 38 project directives now have flows (100% coverage)"
    ]
  }
}
